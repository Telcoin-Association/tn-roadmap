@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');

@import './styles/header-logo.css';
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  body {
    @apply bg-bg text-fg antialiased transition-colors duration-300 ease-out font-sans;
    background-color: var(--bg);
    background-image: var(--hero-gradient);
    background-attachment: fixed;
    background-repeat: no-repeat;
    background-size: cover;
    font-feature-settings: 'ss01' on, 'ss03' on;
  }

  a {
    @apply text-primary transition-colors duration-200 ease-out hover:text-primary-600;
  }

  button:focus-visible,
  a:focus-visible {
    @apply outline-none ring-2 ring-offset-2 ring-offset-bg;
  }

  header > div:first-of-type,
  main.mx-auto {
    padding-block: 2.4rem;
  }
}

@layer utilities {
  main.mx-auto > :not([hidden]) ~ :not([hidden]) {
    --space-y-vertical: 2.4rem;
    margin-top: calc(var(--space-y-vertical) * (1 - var(--tw-space-y-reverse, 0)));
    margin-bottom: calc(var(--space-y-vertical) * var(--tw-space-y-reverse, 0));
  }

  [data-phase-card] {
    position: relative;
    isolation: isolate;
    border-radius: 1.25rem;
    background:
      radial-gradient(circle at 12% -20%, hsl(201 92% 60% / 0.45), transparent 54%),
      radial-gradient(circle at 90% 120%, hsl(248 83% 64% / 0.32), transparent 52%),
      linear-gradient(150deg, hsl(220 74% 16% / 0.92), hsl(220 74% 10% / 0.94));
    box-shadow: 0 24px 70px -54px hsl(220 70% 9% / 0.62);
    transition: box-shadow 200ms ease, transform 200ms ease;
  }

  [data-phase-card]::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    background: linear-gradient(145deg, rgba(255, 255, 255, 0.3), rgba(255, 255, 255, 0));
    opacity: 0.35;
    transition: opacity 200ms ease;
    pointer-events: none;
  }

  [data-phase-card]:is(:hover, :focus-within) {
    box-shadow: 0 30px 85px -56px hsl(201 92% 56% / 0.58);
  }

  [data-phase-card]:is(:hover, :focus-within)::before {
    opacity: 0.6;
  }

  [data-phase-card-surface] {
    display: flex;
    flex-direction: column;
    gap: 0.2rem;
    border-radius: calc(1.25rem - 4px);
    background: linear-gradient(160deg, hsl(222 60% 18% / 0.92), hsl(222 64% 10% / 0.9));
  }

  [data-phase-card-header] {
    align-items: center;
    gap: 0.5rem;
  }

  [data-phase-card-title-group] {
    align-items: center;
    gap: 0.35rem;
  }

  [data-phase-card-title-group] h3 {
    margin-bottom: 0;
  }

  [data-phase-card-title-group] p {
    margin-top: 0;
  }

  [data-phase-card-summary] {
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 2;
    overflow: hidden;
  }

  /* Global compact scaler (~60% of current vertical rhythm) */
  .phase-compact {
    --phase-scale: 0.6;
  }

  .phase-compact [data-phase-card-surface] {
    padding-top: calc(var(--phase-scale) * 16px);
    padding-bottom: calc(var(--phase-scale) * 16px);
    padding-left: calc(var(--phase-scale) * 16px);
    padding-right: calc(var(--phase-scale) * 16px);
    gap: calc(var(--phase-scale) * 12px);
  }

  .phase-compact [data-phase-card-header] {
    gap: calc(var(--phase-scale) * 12px);
    margin-bottom: calc(var(--phase-scale) * 6px);
  }

  .phase-compact [data-phase-card-title-group] > div:first-child {
    width: calc(var(--phase-scale) * 36px);
    height: calc(var(--phase-scale) * 36px);
  }

  .phase-compact [data-phase-card-title-group] svg {
    width: calc(var(--phase-scale) * 20px);
    height: calc(var(--phase-scale) * 20px);
  }

  .phase-compact [data-phase-card-title-group] h3 {
    font-size: calc(var(--phase-scale) * 24px);
    line-height: calc(var(--phase-scale) * 28px);
  }

  .phase-compact [data-phase-card-title-group] p {
    font-size: calc(var(--phase-scale) * 12px);
    letter-spacing: 0.28em;
  }

  .phase-compact [role='status'] {
    padding: calc(var(--phase-scale) * 4px) calc(var(--phase-scale) * 10px);
    font-size: calc(var(--phase-scale) * 12px);
  }

  .phase-compact [data-phase-card-summary] {
    font-size: calc(var(--phase-scale) * 14px);
    line-height: calc(var(--phase-scale) * 20px);
    margin-top: calc(var(--phase-scale) * 2px);
    min-height: calc(var(--phase-scale) * 40px);
  }
}
